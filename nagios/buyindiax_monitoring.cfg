# Nagios Configuration for BuyIndiaX Monitoring

# Define host for application server
define host {
    use                     linux-server
    host_name               buyindiax-app-server
    alias                   BuyIndiaX Application Server
    address                 APP_SERVER_IP  # Replace with actual IP
    max_check_attempts      5
    check_period            24x7
    notification_interval   30
    notification_period     24x7
}

# Service: Check if server is alive
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     PING
    check_command           check_ping!100.0,20%!500.0,60%
}

# Service: Check SSH
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     SSH
    check_command           check_ssh
}

# Service: Check disk space
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     Disk Space
    check_command           check_nrpe!check_disk
}

# Service: Check CPU load
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     CPU Load
    check_command           check_nrpe!check_load
}

# Service: Check total processes
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     Total Processes
    check_command           check_nrpe!check_procs
}

# Service: Check Node.js process
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     Node.js Process
    check_command           check_nrpe!check_node
}

# Service: Check HTTP (React Frontend)
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     HTTP Frontend (Port 3000)
    check_command           check_http!-p 3000
}

# Service: Check Backend API
define service {
    use                     generic-service
    host_name               buyindiax-app-server
    service_description     Backend API (Port 5000)
    check_command           check_http!-p 5000 -u /api/health
}

# Command definition for NRPE
define command {
    command_name    check_nrpe
    command_line    $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$
}
